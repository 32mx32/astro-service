---
// Импортируем глобальные стили Tailwind
import '../styles/global.css';
import Navbar from '../components/navbar/Navbar.astro';

interface Props {
	title?: string;
}

const { title = "Astro Современный Проект" } = Astro.props;
---

<!doctype html>
<html lang="ru" class="scroll-smooth">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>{title}</title>
		
		<style>
			:root {
				--background-color: #f8f9fa;
				--text-color: #2d3748;
				--text-color-rgb: 45, 55, 72;
				--bg-color-rgb: 248, 249, 250;
				--navbar-bg: rgba(248, 249, 250, 0.8);
				--particle-colors: #4299e1,#3182ce,#f6ad55,#ed8936,#e53e3e;
				--neutral-100: rgba(45, 55, 72, 0.1);
				--neutral-800: rgba(45, 55, 72, 0.07);
				--text-color-hover: #1a202c;
			}
			
			html.dark {
				--background-color: #121212;
				--text-color: #e2e2e2;
				--text-color-rgb: 226, 226, 226;
				--bg-color-rgb: 18, 18, 18;
				--navbar-bg: rgba(18, 18, 18, 0.8);
				--particle-colors: #f56565,#ed8936,#ecc94b,#9ae6b4,#63b3ed;
				--neutral-100: rgba(255, 255, 255, 0.1);
				--neutral-800: rgba(255, 255, 255, 0.05);
				--text-color-hover: #ffffff;
			}
			
			body {
				margin: 0;
				overflow: hidden;
				font-size: 16px;
				font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
				background-color: var(--background-color);
				color: var(--text-color);
				transition: background-color 0.3s, color 0.3s;
			}
			
			canvas {
				background: var(--background-color);
				width: 100vw;
				height: 100vh;
			}
		</style>
	</head>
	<body>
		<Navbar />
		
		<slot />
		
		<script>
			// Управление темной темой
			document.addEventListener('DOMContentLoaded', () => {
				const themeToggle = document.getElementById('theme-toggle');
				const sunIcon = document.querySelector('.sun-icon');
				const moonIcon = document.querySelector('.moon-icon');
				
				// Проверяем предпочтения пользователя или сохраненные настройки
				if (localStorage.getItem('theme') === 'dark' || 
					(!localStorage.getItem('theme') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
					document.documentElement.classList.add('dark');
					if (sunIcon && moonIcon) {
						sunIcon.style.display = 'none';
						moonIcon.style.display = 'block';
					}
				} else {
					document.documentElement.classList.remove('dark');
					if (sunIcon && moonIcon) {
						sunIcon.style.display = 'block';
						moonIcon.style.display = 'none';
					}
				}
				
				// Обработчик переключения темы
				if (themeToggle) {
					themeToggle.addEventListener('click', () => {
						document.documentElement.classList.toggle('dark');
						
						if (document.documentElement.classList.contains('dark')) {
							localStorage.setItem('theme', 'dark');
							if (sunIcon && moonIcon) {
								sunIcon.style.display = 'none';
								moonIcon.style.display = 'block';
							}
						} else {
							localStorage.setItem('theme', 'light');
							if (sunIcon && moonIcon) {
								sunIcon.style.display = 'block';
								moonIcon.style.display = 'none';
							}
						}
						
						// Вызываем перерисовку анимации при изменении темы
						if (window.initScene) {
							window.initScene();
						}
					});
				}
			});
		</script>
	</body>
</html>

<!-- Удаляем стандартные стили, так как будем использовать Tailwind -->
