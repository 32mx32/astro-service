---
import Layout from '../layouts/Layout.astro';
---

<Layout title="404 - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞">
	<main class="content-area flex flex-col items-center justify-center min-h-screen py-16 px-4 text-center">
		<canvas id="scene" class="absolute inset-0 -z-10"></canvas>
		
		<div class="max-w-2xl mx-auto bg-opacity-80 dark:bg-opacity-70 backdrop-blur-sm p-8 rounded-lg border border-gray-200 dark:border-gray-700">
			<h1 class="text-6xl font-bold mb-6 text-gradient">404</h1>
			<h2 class="text-3xl font-semibold mb-6">–°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞</h2>
			
			<p class="text-lg mb-8 opacity-90">
				–ö–∞–∂–µ—Ç—Å—è, –≤—ã –ø–æ–ø–∞–ª–∏ –Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É. –í–æ–∑–º–æ–∂–Ω–æ, —Å—Å—ã–ª–∫–∞ —É—Å—Ç–∞—Ä–µ–ª–∞ –∏–ª–∏ –∞–¥—Ä–µ—Å –±—ã–ª –≤–≤–µ–¥–µ–Ω –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ.
			</p>
			
			<div class="flex flex-col sm:flex-row gap-4 justify-center">
				<a href="/" class="px-6 py-3 bg-primary hover:bg-primary-dark transition-colors rounded-lg font-medium">
					–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é
				</a>
				<button 
					id="back-button" 
					class="px-6 py-3 border border-current hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors rounded-lg font-medium"
				>
					–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥
				</button>
			</div>
		</div>
	</main>
</Layout>

<style>
	.text-gradient {
		background: linear-gradient(to right, var(--particle-colors));
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
	}
	
	.bg-primary {
		background-color: var(--accent-color);
		color: var(--accent-text-color);
	}
	
	.bg-primary-dark {
		background-color: var(--accent-color-dark);
	}
</style>

<script>
	// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–∞—Å—Ç–∏—Ü –¥–ª—è —Ñ–æ–Ω–∞
	document.addEventListener('DOMContentLoaded', () => {
		initScene();
		
		// –ö–Ω–æ–ø–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ –Ω–∞–∑–∞–¥
		const backButton = document.getElementById('back-button');
		if (backButton) {
			backButton.addEventListener('click', () => {
				window.history.back();
			});
		}
	});
	
	// –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∞–Ω–∏–º–∞—Ü–∏–∏
	function fullRestart() {
		// –û—á–∏—â–∞–µ–º canvas –∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–µ–º —Å—Ü–µ–Ω—É
		const canvas = document.getElementById('scene');
		if (canvas) {
			const ctx = canvas.getContext('2d');
			if (ctx) {
				ctx.clearRect(0, 0, canvas.width, canvas.height);
				initScene();
				console.log('üîÑ –ê–Ω–∏–º–∞—Ü–∏—è 404 –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω–∞');
			}
		}
	}
	
	// –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É 404
	document.addEventListener('clientNavigationComplete', (e) => {
		if (window.location.pathname.includes('404')) {
			console.log('üìÑ –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É 404 - –∑–∞–ø—É—Å–∫–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é');
			fullRestart();
		}
	});
	
	// –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ñ—É–Ω–∫—Ü–∏—é initScene –∏–∑ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Å–∫–æ–ø–∞
	function initScene() {
		if (window.initScene) {
			window.initScene();
		} else {
			console.warn('‚ö†Ô∏è –§—É–Ω–∫—Ü–∏—è initScene –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏');
			// –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã 404, –µ—Å–ª–∏ –æ—Å–Ω–æ–≤–Ω–∞—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞
			const canvas = document.getElementById('scene');
			if (canvas) {
				const ctx = canvas.getContext('2d');
				if (ctx) {
					// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–∑–º–µ—Ä–æ–≤
					canvas.width = window.innerWidth;
					canvas.height = window.innerHeight;
					
					// –ü–æ–ª—É—á–µ–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤ –∏–∑ CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
					const colorsString = getComputedStyle(document.documentElement)
						.getPropertyValue('--particle-colors')
						.trim();
					const colors = colorsString.split(',').map(color => color.trim());
					
					// –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤—ã—Ö —á–∞—Å—Ç–∏—Ü
					const particles = [];
					for (let i = 0; i < 50; i++) {
						particles.push({
							x: Math.random() * canvas.width,
							y: Math.random() * canvas.height,
							radius: Math.random() * 5 + 2,
							color: colors[Math.floor(Math.random() * colors.length)],
							vx: (Math.random() - 0.5) * 2,
							vy: (Math.random() - 0.5) * 2
						});
					}
					
					// –ê–Ω–∏–º–∞—Ü–∏—è —á–∞—Å—Ç–∏—Ü
					function animate() {
						ctx.clearRect(0, 0, canvas.width, canvas.height);
						
						for (const particle of particles) {
							// –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ
							particle.x += particle.vx;
							particle.y += particle.vy;
							
							// –ì—Ä–∞–Ω–∏—Ü—ã —Ö–æ–ª—Å—Ç–∞
							if (particle.x < 0 || particle.x > canvas.width) particle.vx *= -1;
							if (particle.y < 0 || particle.y > canvas.height) particle.vy *= -1;
							
							// –†–∏—Å–æ–≤–∞–Ω–∏–µ
							ctx.fillStyle = particle.color;
							ctx.beginPath();
							ctx.arc(particle.x, particle.y, particle.radius, 0, Math.PI * 2);
							ctx.fill();
						}
						
						requestAnimationFrame(animate);
					}
					
					animate();
				}
			}
		}
	}
	
	// –î–æ–±–∞–≤–ª—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é –≤ –≥–ª–æ–±–∞–ª—å–Ω—É—é –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏
	window.fullRestart404 = fullRestart;
</script> 